{% extends "base/main_base.html" %}
{% load crispy_forms_tags %}
{% load static %}
{# BLOCK MAIN Content #}
<div class="col-md-12 col-sm-12 col-xs-12">
{% block content %}
<div class="x_panel">

    <div class="x_title">
      <h2> Item List {{ budgeting.jobid }}</h2>
      <ul class="nav navbar-right panel_toolbox">
        <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
        </li>
      </ul>
      <div class="clearfix"></div>
    </div>

    <div class="x_content">
      <div class="table-responsive">
      <table class="table table-bordered jambo_table">
        <thead class="heading">
          <tr>
            <th class="column-title">No</th>
            <th class="column-title">Description</th>
            <th class="column-title">Quantity</th>
            <th class="column-title">Amount</th>
            <th class="column-title">Total Amount</th>
            <th class="column-title">Action</th>
          </tr>
        </thead>

        <tbody>
          {% if items %}
          {% for item in items  %}

          <tr class="even pointer">
            <td>{{  forloop.counter }} </td>
            <td>{{ item.description }}</td>
            <td>{{ item.qty }}</td>
            <td>{{ item.amount }}</td>
            <td>{{ item.tot_amount }}</td>
            <td style="text-align: center;">
              <a id="confirm-delete" href="" class="btn btn-danger btn-xs"><i class="fa fa-trash-o"></i></a>
            </td>
          </tr>
          {% endfor %}

          {% else %}
          <tr>
            <td colspan="15" style="text-align: center">Data Kosong</td>
          </tr>
          {% endif %}
          <tr>
            <td></td>
            <td><input placeholder="Description" type="text" name="" class="form-control"></td>
            <td><input placeholder="Quantity" id="id_qty" type="number" name="" class="form-control"></td>
            <td><input placeholder="Amount" id="id_amount" type="number" name="" class="form-control"></td>
            <td><input placeholder="Total Amount" id="id_tot_amount" type="number" name="" class="form-control" disabled="true"></td>
            <td><input class="btn btn-default btn-sm" type="submit" name="submit" value="Add"></td>
          </tr>
        </tbody>
      </table>
    </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="{% static '/js/jquery-3.1.1.js'%}"></script>
<script>
  $(document).ready(function() {
    $('input#id_qty, input#id_amount').change(function(e)  {
     var total = 0;
     var quantity = parseFloat($('#id_qty').val());
     var amount = parseFloat($('#id_amount').val());

     total = quantity * amount;
     $('#id_tot_amount').val( total );
   });
  });
</script>
{% endblock %}
