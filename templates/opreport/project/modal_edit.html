{% load crispy_forms_tags %}

<!-- Modal -->
<div id="myModal" class="modal fade">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Modal Header</h4>
      </div>

      <div class="modal-body">
        {% crispy form %}
      </div>
    </div>
  </div>
</div>

{# BLOCK javascript #}
{% block javascript %}
  <script type="text/javascript">
    $(document).ready(function() {
      // om: $('#id_om').val('');
      $(document).on('submit','#id_project_form', function(e){
        e.preventDefault();

        $.ajax({
          type: 'POST',
          url: '{% url "opreport:input_data" %}',
          data: {
            om: $('#id_om').val(),
            location: $('#id_location').val(),
            job_no: $('#id_job_no').val(),
            project_name: $('#id_project_name').val(),
            spk_no: $('#id_spk_no').val(),
            value: $('#id_value').val(),
            statuspr_material: $('#id_statuspr_material').val(),
            statuspr_fabrication: $('#id_statuspr_fabrication').val(),
            statuspr_installation: $('#id_statuspr_installation').val(),
            invoice_tahap1: $('#id_invoice_tahap1').val(),
            invoice_tahap2: $('#id_invoice_tahap2').val(),
            invoice_tahap3: $('#id_invoice_tahap3').val(),
            csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val(),
          },

          success:function(){
            $('#myModal').modal('hide');
            alert("sukses input");
            om: $('#id_om').val('');
            location: $('#id_location').val('');
            job_no: $('#id_job_no').val('');
            project_name: $('#id_project_name').val('');
            spk_no: $('#id_spk_no').val('');
            value: $('#id_value').val('');
            statuspr_material: $('#id_statuspr_material').val('');
            statuspr_fabrication: $('#id_statuspr_fabrication').val('');
            statuspr_installation: $('#id_statuspr_installation').val('');
            invoice_tahap1: $('#id_invoice_tahap1').val('');
            invoice_tahap2: $('#id_invoice_tahap2').val('');
            invoice_tahap3: $('#id_invoice_tahap3').val('');
            $('#myModal').modal('hide');
          }

        });

      });
    });
  </script>
{% endblock %}
