{# {% extends "base/main_base.html" %}#}
{% load static %}
{% load crispy_forms_tags %}

<!-- Modal -->
<div id="myModal" class="modal fade">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Add Tender</h4>
      </div>

      <div class="modal-body">
        {% crispy form %}
      </div>
    </div>
  </div>
</div>

{# BLOCK javascript #}
<script src="{% static '/vendors/jquery/dist/jquery.min.js' %}"></script>
{% block javascript %}
  <script type="text/javascript">
    $(document).ready(function() {
      $(document).on('submit','#id_tender_form', function(e){
        e.preventDefault();

        $.ajax({
          type: 'POST',
          url: '{% url "opreport:input_tender" %}',
          data: {
            om: $('#id_om').val(),
            quotation_no: $('#id_quotation_no').val(),
            location: $('#id_location').val(),
            tender_name: $('#id_tender_name').val(),
            rks_no: $('#id_rks_no').val(),
            process_registration: $('#id_process_registration').val(),
            process_aanwizing: $('#id_process_aanwizing').val(),
            process_openbid: $('#id_process_openbid').val(),
            addcost_bidbond: $('#id_addcost_bidbond').val(),
            addcost_reffbank: $('#id_addcost_reffbank').val(),
            addcost_document: $('#id_addcost_document').val(),
            remark: $('#id_remark').val(),
            csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val(),
          },


          success:function(data){
            $('#myModal').modal('hide');
            location.reload();
          }

        });

      });
    });
  </script>
{% endblock %}
