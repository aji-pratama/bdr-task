{% extends "base/main_base.html" %}
{% load crispy_forms_tags %}
{% load static %}

{# BLOCK MAIN Content #}
<div class="col-md-12 col-sm-12 col-xs-12">


{% block content %}
<div class="x_panel">

    {% if messages %}
      {% for message in messages %}
        <div class="alert alert-success alert-sm">{{ message }}</div>
      {% endfor %}
    {% endif %}

    <div class="x_title">
      <h2> Add New Delivery</h2>
      <ul class="nav navbar-right panel_toolbox">
        <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
        </li>
      </ul>
      <div class="clearfix"></div>
    </div>

    <div class="x_content">
        {% crispy form %}
    </div>
  </div>
</div>
</div>
<script src="{% static '/vendors/jquery/dist/jquery.min.js' %}"></script>
<script type="text/javascript" src="{% static '/js/jquery-ui.js' %}"></script>
<script type="text/javascript">
</script>

{% endblock %}

{% block 'javascript' %}
<script type="text/javascript">
  $(document).ready(function() {
    $(document).on('submit','#id_delivery_form', function(e){
      e.preventDefault();

      $.ajax({
        type: 'POST',
        url: '{% url "opreport:input_delivery" %}',
        data: {
          om: $('#id_om').val(),
          location: $('#id_location').val(),
          job_no: $('#id_job_no').val(),
          description_material: $('#id_description_material').val(),
          vendor: $('#id_vendor').val(),
          value_dpp: $('#id_value_dpp').val(),
          value_ppn: $('#id_value_ppn').val(),
          progress_dono: $('#id_progress_dono').val(),
          progress_leadtime: $('#id_progress_leadtime').val(),
          progress_pickup: $('#id_progress_pickup').val(),
          expedisi: $('#id_expedisi').val(),
          order_status: $('#id_order_status').val(),
          csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val(),
        },

        success:function(data){
          location.reload();
        }

      });

    });
  });
</script>

{% endblock %}
